$webResourceManager.requireResource("jira.webresources:calendar-en")
<div class="column full" id="primary">
	<div class="content">
		<p>SLAdiator is monitoring your ticket workflow, calculates spent
			time according your Service Level Agreement and warns you before SLA
			breach!</p>
		#if ( $isProjectLead )
		  <input type="hidden" id="baseURL" value="$baseURL"/>
		  <input type="hidden" id="serviceURL" value="$serviceURL"/>
      <div class="module">
	      <div class="mod-header">
	        <h3>SLAdiator configuration</h3>
	      </div>
	      <div class="mod-content">
	        <form class="aui" action="#" method="post" id="sladiator-project" data-loaded="">
	          <input type="hidden" name="project" value="$projectId"/>
	          <div class="warningBox" style="display:none;"></div>
	          <div class="infoBox" style="display:none;"></div>
	          <fieldset>
	            <div class="field-group">
	              <label for="sla_token">SLA token
	                <span class="aui-icon icon-required"></span>
	                <span class="content">required</span>
	              </label>
	              <input class="text long-field" maxlength="250" name="sla_token" type="text" id="sla_token" value="$sla.getSlaToken()" />
	              <div class="description">Copy SLA token given in SLAdiator.com configuration page.</div>
	            </div>
	            <div class="field-group">
                 <label for="send_assignee">Include assignee?</label>
                 <input class="checkbox " name="send_assignee" type="checkbox" value="1" id="send_assignee" $sla.checkedSendAssignee()>
              </div>
              <fieldset>
                <legend style="margin:0px;padding:0px;text-align: left;font-weight: bold;float:none;">Include custom fields if you need them for SLA</legend>
                <div class="field-group">
                  <label for="custom_field1">Custom field 1</label>
                   <select name="custom_field1" id="custom_field1">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField1($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
                <div class="field-group">
                  <label for="custom_field2">Custom field 2</label>
                   <select name="custom_field2" id="custom_field2">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField2($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
                <div class="field-group">
                  <label for="custom_field3">Custom field 3</label>
                   <select name="custom_field3" id="custom_field3">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField3($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
                <div class="field-group">
                  <label for="custom_field4">Custom field 4</label>
                   <select name="custom_field4" id="custom_field4">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField4($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
                <div class="field-group">
                  <label for="custom_field5">Custom field 5</label>
                   <select name="custom_field5" id="custom_field5">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField5($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
                <div class="field-group">
                  <label for="custom_field6">Custom field 6</label>
                   <select name="custom_field6" id="custom_field6">
                     <option value=""></option>
                     #foreach ($customField in $customFields) 
                       <option value="$customField.getId()" $sla.checkedCustomField6($customField.getId())>$customField.getName()</option>
                     #end
                   </select>
                </div>
              </fieldset>
	          </fieldset>
	          <div class="buttons-container content-footer">
	            <div class="buttons">
	               <input type="submit" name="save" id="saveSLA" value="Save and Test" accesskey="s" class="button spaced " />
	               <input type="button" name="visit" id="visitSLA" value="Visit SLA configuration in SLAdiator" class="button spaced " />
	            </div>
	          </div>
	        </form>
	      </div>
	    </div>
	    #if (!$errors.isEmpty())
		    <div class="module">
		      <div class="mod-header">
		        <h3>Tickets not sent</h3>
		      </div>
		      <div class="mod-content">
		        <form class="aui" action="#" method="post" id="sladiator-janitor">
            <input type="hidden" name="project" value="$projectId"/>
			        <div class="warningBox" style="display:none;"></div>
			        <div class="noteBox">
			          <p>JIRA was not able to send following tickets.</p>
			          <p>You can try to send these tickets again by pressing "Send again".</p>
			          <p>If error lists still indicates problems with some tickets, the reasons could be:</p>
			          <ul>
			            <li>JIRA can not reach SLAdiator - please check it by pressing "Test connection" above</li>
			            <li>SLAdiator.com is down for maintenance - please check that <a href="https://sladiator.com">sladiator.com</a> is reachable</li>
			          </ul>
			        </div>
			        #foreach ($error in $errors)
	              #if (!$error.isEmpty()) 
	                <a href="$issue_url$error">$error</a>
	               #end
	            #end
				        <div class="buttons-container content-footer">
				          <div class="buttons">
				            <input type="submit" name="save" id="janitorSLA" value="Send again" class="button spaced" />
				           </div>
				        </div>
				    </form>
		      </div>
		    </div>
		   #end
	    <div class="module">
	      <div class="mod-header">
	        <h3>Send old issues to SLAdiator</h3>
	      </div>
	      <div class="mod-content">
	        <form class="aui" action="#" method="post" id="sladiator-teleprot">
	          <input type="hidden" name="project" value="$projectId"/>
	          <div class="warningBox" style="display:none;"></div>
	          <div class="infoBox" style="display:none;"></div>
	          <div class="field-group aui-field-datepicker">
	            <label for="teleport_date_from">Starting from</label> 
	            <input class="text medium-field " maxlength="150" name="date_from" type="text" id="date_from" />
	            <a href="#" id="date_from-trigger" title="Select a date">
	              <span class="aui-icon icon-date">Select a date</span>
	            </a>
	            <fieldset class="hidden datepicker-params">
                <input title="firstDay" type="hidden" value="0" />
                <input title="inputField" type="hidden" value="date_from" />
                <input title="button" type="hidden" value="duedate-trigger" />
                <input title="align" type="hidden" value="Br" />
                <input title="singleClick" type="hidden" value="true" />
                <input title="useISO8601WeekNumbers" type="hidden" value="false" />
                <input title="ifFormat" type="hidden" value="%e/%m/%Y" />
	            </fieldset>
	            <div class="description">Date from which tickets needs to be sent to SLAdiator.</div>
	            <script type="text/javascript">
	                Calendar.setup({
	                  firstDay : 0,
	                  inputField : 'date_from',
	                  button : 'date_from-trigger',
	                  align: 'Br',
	                  singleClick: true,
	                  useISO8601WeekNumbers : false,
	                  ifFormat : '%e/%m/%Y'
	                });
	              </script>
	          </div>
	          <div class="buttons-container content-footer">
	            <div class="buttons">
	              <input type="submit" name="save" id="teleportSLA" value="Send" class="button spaced">
	             </div>
	          </div>
	        </form>
	      </div>
	    </div>
	    <div class="module">
        <div class="mod-header">
          <h3>Delete SLAdiator configuration</h3>
        </div>
        <form class="aui" action="#" method="post" id="sladiator-delete">
          <input type="hidden" name="project" value="$projectId"/>
          <div class="buttons-container content-footer">
            <div class="buttons">
              <input type="submit" name="save" id="deleteSLA" value="Delete my configuration" class="button spaced">
            </div>
          </div>
        </form>
      </div>
	  #else
	   #if ($sla.getSlaToken().isEmpty())
	     <div class="infoBox" style="">This project is not yet configured to use SLAdiator. <a href="https://simplesla.ebit.lv/" target="_blank">Visit SLAdiator and try it out.</a></div>
	   #else
	     <div class="infoBox" style="">This project is configured to use SLAdiator. <a href="https://simplesla.ebit.lv/sla_token/$sla.getSlaToken()" target="_blank">Visit SLAdiator for your project.</a></div>
	   #end
		#end
	</div>
	<div class="aui-blanket" id="freezer" style="display: none;">
	 <div class="aui-loading" style="display: block; background-position: 0px -200px;"></div>
	</div>
	
</div>

<script type="text/javascript" src="$req.contextPath/download/resources/lv.ebit.jira.plugins.sladiator:assets/sladiator.js"></script>
<link type="text/css" href="$req.contextPath/download/resources/lv.ebit.jira.plugins.sladiator:assets/sladiator.css" rel="stylesheet" />